payment:
  timeoutSeconds: 10
  webhookUrl: "https://localhost:8080/payments/webhook"
  gateways:
    toss:
      name: "토스페이먼츠"
      apiKey: "temp_key_for_toss"
      supports:
        - "CREDIT_CARD"
        - "BANK_TRANSFER"
        - "NAVER_PAY"
      fees:
        CREDIT_CARD: 5.0
        BANK_TRANSFER: 10.0
        NAVER_PAY: 15.0
    inicis:
      name: "KG이니시스"
      apiKey: "temp_key_for_inicis"
      supports:
        - "CREDIT_CARD"
        - "BANK_TRANSFER"
        - "NAVER_PAY"
      fees:
        CREDIT_CARD: 3.0
        BANK_TRANSFER: 12.0
        NAVER_PAY: 15.0
    nicepay:
      name: "나이스페이먼츠"
      apiKey: "temp_key_for_nicepay"
      supports:
        - "CREDIT_CARD"
        - "BANK_TRANSFER"
      fees:
        CREDIT_CARD: 2.0
        BANK_TRANSFER: 7.0

resilience4j:
  circuitbreaker:
    configs:
      base:
        sliding-window-type: TIME_BASED # 시간 기반
        sliding-window-size: 60 # 60초
        failure-rate-threshold: 30 # 실패율 30%
        wait-duration-in-open-state: 10m # 차단 시간 10분 유지
        minimum-number-of-calls: 10 # 1분간 최소 10콜은 쌓여야 통계 유효

        record-exceptions:  # 실패로 간주할 예외
          - org.example.pgrouting.domain.payment.exception.PgServerException
          - java.io.IOException
          - java.util.concurrent.TimeoutException

        ignore-exceptions:  # 실패로 간주하지 않을 예외
          - org.example.pgrouting.domain.payment.exception.PgClientException

    instances:
      toss:
        base-config: base
      inicis:
        base-config: base
      nicepay:
        base-config: base